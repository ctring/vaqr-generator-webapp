<!doctype html>
<html>
<head>
  <title>VAQR Generator</title>
  <!--
  Flask automatically makes files in the 'static' directory available via
  '/static'.
  -->
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <h1>VAQR Generator</h1>
  <div>
    {% if not is_signed_in: %}
      <form action="{{ url_for('oauth2callback') }}" method="GET">
        <input type="submit" value="Sign In">
      </form>
    {% else %}
      <form action="{{ url_for('oauth2revoke') }}" method="GET">
        <input type="submit" value="Sign Out">
      </form>
      <p>Signed in as {{ email }} </p>
    {% endif %}
  </div>
  <br>
  <div>
    <form action="{{ url_for('generate') }}" method="POST" id="emailsForm">
      Drive Folder ID <input type="text" name="folder_id">
      <br>
      <textarea rows="10"  cols="50" placeholder="Enter each email on one line" 
                name="emails" form="emailsForm"></textarea>
      <br>
      <input type="submit" value="Generate">
    </form>
  <div>
  <br>
  <div>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul class=flashes>
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
      </ul>
    {% endif %}
    {% endwith %}
    <br>
    {% if email_link %}
      <table>
        <tr>
          <th>Email</th>
          <th>Drive link</th>
        </tr>
        {% for item in email_link %}
          <tr>
            <td>{{ item }}</td>
            <td>{{ email_link[item] }}</td>
          </tr>
        {% endfor %}
      </table>
    {% endif %}
  </div>
</body>
</html>